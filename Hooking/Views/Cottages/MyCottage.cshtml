@model Hooking.Models.Cottage

@{
    ViewData["Title"] = "Prikaz vikendice";
}
@{
    var cottageOwner = (UserDetails)ViewData["CottageOwner"];
    var houseRules = (HouseRules)ViewData["HouseRules"];
    var cancelationPolicy = (CancelationPolicy)ViewData["CancellationPolicyId"];
    var facilites = (Facilities)ViewData["Facilities"];
    var fullAddress = (string)ViewData["FullAddress"];
    List<CottageRoom> cottageRooms = (List<CottageRoom>)ViewData["CottageRooms"];
    List<CottageImage> cottageImages = (List<CottageImage>)ViewData["CottageImages"];
}
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" type="text/javascript"></script>

<h1>Vikendica @Model.Name</h1>

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Name)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Name)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Address)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Address)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.City)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.City)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Country)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Country)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.RoomCount)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.RoomCount)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Area)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Area)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.AverageGrade)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.AverageGrade)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.GradeCount)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.GradeCount)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.RegularPrice)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.RegularPrice)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.WeekendPrice)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.WeekendPrice)
        </dd>
        <dt class="col-sm-2">
            Vlasnik
        </dt>
        <dd class="col-sm-10">
            @cottageOwner.FirstName @cottageOwner.LastName
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Izmeni informacije o vikendici</a>
</div>
<br />
<h4>Lokacija</h4>
<div name="GoogleMap">

    <div class="mapouter">
        <div class="gmap_canvas">
            <iframe width="800" height="500" id="gmap_canvas" src="https://maps.google.com/maps?q=@fullAddress&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe><a href="https://www.online-timer.net">timer</a><br>
            <style>
                .mapouter {
                    position: relative;
                    text-align: right;
                    height: 500px;
                    width: 800px;
                }
            </style><a href="https://www.embedgooglemap.net">embedded google maps in website</a>
            <style>
                .gmap_canvas {
                    overflow: hidden;
                    background: none !important;
                    height: 500px;
                    width: 800px;
                }
            </style>
        </div>
    </div>
</div>
<div>
    <h4>Pravila ponašanja</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Kućni ljubimci
        </dt>
        <dd class="col-sm-10">
            @if (houseRules.PetFriendly)
            {
                @Html.Raw("Dozvoljeno");
            }
            else
            {
                @Html.Raw("Nije dozvoljeno");
            }
        </dd>
        <dt class="col-sm-2">
            Zabranjeno pušenje
        </dt>
        <dd class="col-sm-10">
            @if (houseRules.NonSmoking)
            {
                @Html.Raw("Dozvoljeno");
            }
            else
            {
                @Html.Raw("Nije dozvoljeno");
            }
        </dd>
        <dt class="col-sm-2">
            Vreme prijave u smeštaj
        </dt>
        <dd class="col-sm-10">
            @houseRules.CheckInTime
        </dd>
        <dt class="col-sm-2">
            Vreme odjave iz smeštaja
        </dt>
        <dd class="col-sm-10">
            @houseRules.CheckOutTime
        </dd>
        <dt class="col-sm-2">
            Limit za broj godina
        </dt>
        <dd class="col-sm-10">
            @if (houseRules.AgeRestriction == 0)
            {
                @Html.Raw("Nema limita");
            }
            else
            {
                @Html.Raw(houseRules.AgeRestriction);
            }
        </dd>

    </dl>
</div>
<div>
    <a asp-action="Edit" asp-controller="HouseRules" asp-route-id="@houseRules.Id">Izmeni pravila ponašanja</a>
</div>
<div>
    <h4>Uslovi otkazivanja</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Besplatno otkazivanje do (broj dana)
        </dt>
        <dd class="col-sm-10">
            @cancelationPolicy.FreeUntil
        </dd>
        <dt class="col-sm-2">
            Procenat od uplate koji se zadržava u slučaju otkaza
        </dt>
        <dd class="col-sm-10">
            @cancelationPolicy.PenaltyPercentage
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-controller="CancelationPolicies" asp-route-id="@cancelationPolicy.Id">Izmeni pravila otkazivanja</a>
</div>
<div>
    <h4>Pogodnosti</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Parking
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Parking)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            WiFi
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Wifi)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Grejanje
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Heating)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Roštilj
        </dt>
        <dd class="col-sm-10">
            @if (facilites.BarbecueFacilities)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Online prijavljivanje u smeštaj
        </dt>
        <dd class="col-sm-10">
            @if (facilites.OnlineCheckin)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Đakuzi
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Jacuzzi)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Pogled na more
        </dt>
        <dd class="col-sm-10">
            @if (facilites.SeaView)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Pogled na planinu
        </dt>
        <dd class="col-sm-10">
            @if (facilites.MountainView)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Kuhinja
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Kitchen)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Veš mašina
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Parking)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Aerodromski transfer
        </dt>
        <dd class="col-sm-10">
            @if (facilites.AirportShuttle)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Zatvoreni bazen
        </dt>
        <dd class="col-sm-10">
            @if (facilites.IndoorPool)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Otvoreni bazen
        </dt>
        <dd class="col-sm-10">
            @if (facilites.OutdoorPool)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Mini-bar
        </dt>
        <dd class="col-sm-10">
            @if (facilites.StockedBar)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
        <dt class="col-sm-2">
            Dvorište
        </dt>
        <dd class="col-sm-10">
            @if (facilites.Garden)
            {
                @Html.Raw("Da");
            }
            else
            {
                @Html.Raw("Ne");
            }
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-controller="Facilities" asp-route-id="@facilites.Id">Izmeni pogodnosti</a>
</div>
<h4>Sobe</h4>
@foreach (var cottageRoom in cottageRooms)
{
    <div>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">
                Broj kreveta
            </dt>
            <dd class="col-sm-10">
                @cottageRoom.BedCount
            </dd>
            <dt class="col-sm-2">
                Klima uređaj
            </dt>
            <dd class="col-sm-10">
                @if (cottageRoom.AirCondition)
                {
                    @Html.Raw("Da");
                }
                else
                {
                    @Html.Raw("Ne");
                }
            </dd>
            <dt class="col-sm-2">
                TV
            </dt>
            <dd class="col-sm-10">
                @if (cottageRoom.TV)
                {
                    @Html.Raw("Da");
                }
                else
                {
                    @Html.Raw("Ne");
                }
            </dd>
            <dt class="col-sm-2">
                Terasa
            </dt>
            <dd class="col-sm-10">
                @if (cottageRoom.Balcony)
                {
                    @Html.Raw("Da");
                }
                else
                {
                    @Html.Raw("Ne");
                }
            </dd>
        </dl>
    </div>
    <div>
        <a asp-action="Edit" asp-controller="CottageRooms" asp-route-id="@cottageRoom.Id">Izmeni sobu</a>
    </div>

}
<br />
<div class="container">

    <div class="row">

        @foreach (var item in cottageImages)
        {
            <div class="col-lg-3 col-md-4 col-xs-6 thumb">

                <a class="thumbnail" href="@item.ImageUrl">
                    <img class="img-responsive" src="@item.ImageUrl" style="height: 100%;width: 100%" alt="">
                </a>


            </div>


        }
    </div>
    <br />
    <div class="row">
        @using (Html.BeginForm("UploadImage", "Cottages", new { id = @Model.Id }, FormMethod.Post, true, new { enctype = "multipart/form-data" }))
        {
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <h3 class="panel-title">Dodaj novu sliku</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-4 col-md-offset-4">
                            <input id="Upload" type="file" name="file" />
                            <br />
                            <br />
                            <input type="submit" class="btn btn-primary" value="Sačuvaj" />
                        </div>
                    </div>
                </div>
            </div>
        }

    </div>

</div>
<br />

<script type="text/javascript">

    var geocoder = new google.maps.Geocoder();
    var map;
    var longitude;
    var latitude;
    function LoadGoogleMAP() {
        geocoder.geocode({ 'address': @fullAddress }, function (results, status) {

            if (status == google.maps.GeocoderStatus.OK) {
                latitude = results[0].geometry.location.lat();
                longitude = results[0].geometry.location.lng();
                alert(latitude);
            }
        });

            var SetmapOptions = {
                 zoom: 10,
                 center: new google.maps.LatLng(latitude, longitude),
                 mapTypeId: google.maps.MapTypeId.HYBRID
            };
            map = new google.maps.Map(document.getElementById('canvasMap'), SetmapOptions);
    }
    google.maps.event.addDomListener(window, 'load', LoadGoogleMAP);

    window.onload = LoadGoogleMAP;
</script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfp55orTG_Zdfj54iIeN6VlJiIxoQtpRk&callback=initMap"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfp55orTG_Zdfj54iIeN6VlJiIxoQtpRk&libraries=places"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfp55orTG_Zdfj54iIeN6VlJiIxoQtpRk"></script>
<script type="/text/javascript" src="https://maps.googleapis.com/maps/api/geocode/json?address=@fullAddress&sensor=true"></script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}